{"ast":null,"code":"import _objectSpread from\"C:/Users/nehit/OneDrive/Desktop/frontend/MedicalSystem/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const AppContext=/*#__PURE__*/createContext();const initialUsers=[{id:1,name:'Dr. Smith',email:'dr.smith@example.com',role:'doctor',registered:true},{id:2,name:'Dr. Johnson',email:'dr.johnson@example.com',role:'doctor',registered:true},{id:3,name:'John Doe',email:'john@example.com',role:'patient',registered:true}];export const AppProvider=_ref=>{let{children}=_ref;const[users,setUsers]=useState(initialUsers);const[appointments,setAppointments]=useState([]);const[currentUser,setCurrentUser]=useState(null);const login=user=>{// find existing user by email\nlet existing=users.find(u=>u.email&&user.email&&u.email===user.email);if(existing){setCurrentUser(existing);return existing;}const newUser={id:Date.now(),name:user.name||(user.email?user.email.split('@')[0]:'User'),email:user.email||null,role:user.role||'patient',registered:user.registered!==undefined?user.registered:true};setUsers(prev=>[...prev,newUser]);setCurrentUser(newUser);return newUser;};const logout=()=>setCurrentUser(null);const addAppointment=_ref2=>{let{doctorId,doctorName,specialty,date,patientName,patientEmail,patientRegistered,patientId}=_ref2;const appointment={id:Date.now(),doctorId:doctorId||null,doctorName:doctorName||null,specialty:specialty||null,date:date||new Date().toLocaleString(),patientName:patientName||'Guest',patientEmail:patientEmail||null,patientRegistered:!!patientRegistered,patientId:patientId||null,status:'Pending'};setAppointments(prev=>[appointment,...prev]);return appointment;};const setAppointmentStatus=(id,status)=>{setAppointments(prev=>prev.map(a=>a.id===id?_objectSpread(_objectSpread({},a),{},{status}):a));};const registerPatient=_ref3=>{let{name,email}=_ref3;if(!email)return null;const existing=users.find(u=>u.email===email);if(existing)return existing;const newUser={id:Date.now(),name:name||email.split('@')[0],email,role:'patient',registered:true};setUsers(prev=>[...prev,newUser]);// mark any appointments from this email as registered\nsetAppointments(prev=>prev.map(a=>a.patientEmail===email?_objectSpread(_objectSpread({},a),{},{patientRegistered:true,patientId:newUser.id}):a));return newUser;};const doctors=users.filter(u=>u.role==='doctor');return/*#__PURE__*/_jsx(AppContext.Provider,{value:{users,doctors,appointments,currentUser,login,logout,addAppointment,setAppointmentStatus,registerPatient},children:children});};export const useAppContext=()=>useContext(AppContext);export default AppContext;","map":{"version":3,"names":["React","createContext","useContext","useState","jsx","_jsx","AppContext","initialUsers","id","name","email","role","registered","AppProvider","_ref","children","users","setUsers","appointments","setAppointments","currentUser","setCurrentUser","login","user","existing","find","u","newUser","Date","now","split","undefined","prev","logout","addAppointment","_ref2","doctorId","doctorName","specialty","date","patientName","patientEmail","patientRegistered","patientId","appointment","toLocaleString","status","setAppointmentStatus","map","a","_objectSpread","registerPatient","_ref3","doctors","filter","Provider","value","useAppContext"],"sources":["C:/Users/nehit/OneDrive/Desktop/frontend/MedicalSystem/src/context/AppContext.js"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\r\n\r\nconst AppContext = createContext();\r\n\r\nconst initialUsers = [\r\n  { id: 1, name: 'Dr. Smith', email: 'dr.smith@example.com', role: 'doctor', registered: true },\r\n  { id: 2, name: 'Dr. Johnson', email: 'dr.johnson@example.com', role: 'doctor', registered: true },\r\n  { id: 3, name: 'John Doe', email: 'john@example.com', role: 'patient', registered: true },\r\n];\r\n\r\nexport const AppProvider = ({ children }) => {\r\n  const [users, setUsers] = useState(initialUsers);\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  const login = (user) => {\r\n    // find existing user by email\r\n    let existing = users.find(u => u.email && user.email && u.email === user.email);\r\n    if (existing) {\r\n      setCurrentUser(existing);\r\n      return existing;\r\n    }\r\n\r\n    const newUser = {\r\n      id: Date.now(),\r\n      name: user.name || (user.email ? user.email.split('@')[0] : 'User'),\r\n      email: user.email || null,\r\n      role: user.role || 'patient',\r\n      registered: user.registered !== undefined ? user.registered : true,\r\n    };\r\n    setUsers(prev => [...prev, newUser]);\r\n    setCurrentUser(newUser);\r\n    return newUser;\r\n  };\r\n\r\n  const logout = () => setCurrentUser(null);\r\n\r\n  const addAppointment = ({ doctorId, doctorName, specialty, date, patientName, patientEmail, patientRegistered, patientId }) => {\r\n    const appointment = {\r\n      id: Date.now(),\r\n      doctorId: doctorId || null,\r\n      doctorName: doctorName || null,\r\n      specialty: specialty || null,\r\n      date: date || new Date().toLocaleString(),\r\n      patientName: patientName || 'Guest',\r\n      patientEmail: patientEmail || null,\r\n      patientRegistered: !!patientRegistered,\r\n      patientId: patientId || null,\r\n      status: 'Pending',\r\n    };\r\n    setAppointments(prev => [appointment, ...prev]);\r\n    return appointment;\r\n  };\r\n\r\n  const setAppointmentStatus = (id, status) => {\r\n    setAppointments(prev => prev.map(a => a.id === id ? { ...a, status } : a));\r\n  };\r\n\r\n  const registerPatient = ({ name, email }) => {\r\n    if (!email) return null;\r\n    const existing = users.find(u => u.email === email);\r\n    if (existing) return existing;\r\n    const newUser = { id: Date.now(), name: name || email.split('@')[0], email, role: 'patient', registered: true };\r\n    setUsers(prev => [...prev, newUser]);\r\n    // mark any appointments from this email as registered\r\n    setAppointments(prev => prev.map(a => a.patientEmail === email ? { ...a, patientRegistered: true, patientId: newUser.id } : a));\r\n    return newUser;\r\n  };\r\n\r\n  const doctors = users.filter(u => u.role === 'doctor');\r\n\r\n  return (\r\n    <AppContext.Provider value={{ users, doctors, appointments, currentUser, login, logout, addAppointment, setAppointmentStatus, registerPatient }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAppContext = () => useContext(AppContext);\r\n\r\nexport default AppContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}