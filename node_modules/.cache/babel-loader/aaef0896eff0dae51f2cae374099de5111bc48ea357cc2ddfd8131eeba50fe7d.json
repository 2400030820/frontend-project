{"ast":null,"code":"import React,{useState}from'react';import'../styles/PatientDashboard.css';import{useAppContext}from'../context/AppContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PatientDashboard=()=>{const{addAppointment,appointments,currentUser}=useAppContext();const[showBooking,setShowBooking]=useState(false);const[guestName,setGuestName]=useState('');const[guestEmail,setGuestEmail]=useState('');const[selectedDoctor,setSelectedDoctor]=useState(null);const{doctors}=useAppContext();const availableDoctors=doctors.length?doctors:[{id:1,name:'Dr. Smith',specialty:'Cardiologist'},{id:2,name:'Dr. Johnson',specialty:'Dermatologist'},{id:3,name:'Dr. Williams',specialty:'General Physician'}];const bookAppointment=(doctor,patientInfo)=>{const newAppointment=addAppointment({doctorId:doctor.id,doctorName:doctor.name,specialty:doctor.specialty,date:new Date().toLocaleString(),patientName:patientInfo.name,patientEmail:patientInfo.email,patientRegistered:!!patientInfo.registered,patientId:patientInfo.id||null});setShowBooking(false);setSelectedDoctor(null);setGuestName('');setGuestEmail('');};const myAppointments=appointments.filter(a=>currentUser&&a.patientEmail===currentUser.email);return/*#__PURE__*/_jsxs(\"div\",{className:\"patient-dashboard\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Patient Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-button\",onClick:()=>setShowBooking(!showBooking),children:\"Book New Appointment\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"appointments-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Appointments\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"appointments-list\",children:[myAppointments.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No appointments yet.\"}),myAppointments.map(appointment=>/*#__PURE__*/_jsxs(\"div\",{className:\"appointment-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:appointment.doctorName}),/*#__PURE__*/_jsx(\"p\",{children:appointment.specialty}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",appointment.date]}),/*#__PURE__*/_jsx(\"span\",{className:\"status \".concat(appointment.status.toLowerCase()),children:appointment.status})]},appointment.id))]})]}),showBooking&&/*#__PURE__*/_jsxs(\"section\",{className:\"booking-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Available Doctors\"}),/*#__PURE__*/_jsx(\"div\",{className:\"doctors-list\",children:availableDoctors.map(doctor=>/*#__PURE__*/_jsxs(\"div\",{className:\"doctor-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:doctor.name}),/*#__PURE__*/_jsx(\"p\",{children:doctor.specialty}),/*#__PURE__*/_jsx(\"button\",{className:\"book-button\",onClick:()=>setSelectedDoctor(doctor),children:\"Select\"})]},doctor.id))}),selectedDoctor&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16},children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Booking with \",selectedDoctor.name]}),currentUser&&currentUser.role==='patient'&&currentUser.email?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Booking as: \",currentUser.name,\" (\",currentUser.email,\")\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"book-button\",onClick:()=>bookAppointment(selectedDoctor,{name:currentUser.name,email:currentUser.email,registered:true,id:currentUser.id}),children:\"Confirm Booking\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",value:guestName,onChange:e=>setGuestName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",value:guestEmail,onChange:e=>setGuestEmail(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"book-button\",onClick:()=>bookAppointment(selectedDoctor,{name:guestName,email:guestEmail,registered:false}),children:\"Confirm Guest Booking\"})]})]})]})]})]});};export default PatientDashboard;","map":{"version":3,"names":["React","useState","useAppContext","jsx","_jsx","jsxs","_jsxs","PatientDashboard","addAppointment","appointments","currentUser","showBooking","setShowBooking","guestName","setGuestName","guestEmail","setGuestEmail","selectedDoctor","setSelectedDoctor","doctors","availableDoctors","length","id","name","specialty","bookAppointment","doctor","patientInfo","newAppointment","doctorId","doctorName","date","Date","toLocaleString","patientName","patientEmail","email","patientRegistered","registered","patientId","myAppointments","filter","a","className","children","onClick","map","appointment","concat","status","toLowerCase","style","marginTop","role","value","onChange","e","target"],"sources":["C:/Users/nehit/OneDrive/Desktop/frontend/MedicalSystem/src/components/PatientDashboard.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport '../styles/PatientDashboard.css';\r\nimport { useAppContext } from '../context/AppContext';\r\n\r\nconst PatientDashboard = () => {\r\n  const { addAppointment, appointments, currentUser } = useAppContext();\r\n  const [showBooking, setShowBooking] = useState(false);\r\n  const [guestName, setGuestName] = useState('');\r\n  const [guestEmail, setGuestEmail] = useState('');\r\n  const [selectedDoctor, setSelectedDoctor] = useState(null);\r\n\r\n  const { doctors } = useAppContext();\r\n  const availableDoctors = doctors.length ? doctors : [\r\n    { id: 1, name: 'Dr. Smith', specialty: 'Cardiologist' },\r\n    { id: 2, name: 'Dr. Johnson', specialty: 'Dermatologist' },\r\n    { id: 3, name: 'Dr. Williams', specialty: 'General Physician' },\r\n  ];\r\n\r\n  const bookAppointment = (doctor, patientInfo) => {\r\n    const newAppointment = addAppointment({\r\n      doctorId: doctor.id,\r\n      doctorName: doctor.name,\r\n      specialty: doctor.specialty,\r\n      date: new Date().toLocaleString(),\r\n      patientName: patientInfo.name,\r\n      patientEmail: patientInfo.email,\r\n      patientRegistered: !!patientInfo.registered,\r\n      patientId: patientInfo.id || null,\r\n    });\r\n    setShowBooking(false);\r\n    setSelectedDoctor(null);\r\n    setGuestName('');\r\n    setGuestEmail('');\r\n  };\r\n\r\n  const myAppointments = appointments.filter(a => currentUser && (a.patientEmail === currentUser.email));\r\n\r\n  return (\r\n    <div className=\"patient-dashboard\">\r\n      <header className=\"dashboard-header\">\r\n        <h2>Patient Dashboard</h2>\r\n        <button className=\"primary-button\" onClick={() => setShowBooking(!showBooking)}>\r\n          Book New Appointment\r\n        </button>\r\n      </header>\r\n\r\n      <div className=\"dashboard-content\">\r\n        <section className=\"appointments-section\">\r\n          <h3>Your Appointments</h3>\r\n          <div className=\"appointments-list\">\r\n            {myAppointments.length === 0 && <p>No appointments yet.</p>}\r\n            {myAppointments.map((appointment) => (\r\n              <div key={appointment.id} className=\"appointment-card\">\r\n                <h4>{appointment.doctorName}</h4>\r\n                <p>{appointment.specialty}</p>\r\n                <p>Date: {appointment.date}</p>\r\n                <span className={`status ${appointment.status.toLowerCase()}`}>\r\n                  {appointment.status}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </section>\r\n\r\n        {showBooking && (\r\n          <section className=\"booking-section\">\r\n            <h3>Available Doctors</h3>\r\n            <div className=\"doctors-list\">\r\n              {availableDoctors.map((doctor) => (\r\n                <div key={doctor.id} className=\"doctor-card\">\r\n                  <h4>{doctor.name}</h4>\r\n                  <p>{doctor.specialty}</p>\r\n                  <button\r\n                    className=\"book-button\"\r\n                    onClick={() => setSelectedDoctor(doctor)}\r\n                  >\r\n                    Select\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {selectedDoctor && (\r\n              <div style={{ marginTop: 16 }}>\r\n                <h4>Booking with {selectedDoctor.name}</h4>\r\n                {/* If logged in as a registered patient, prefill info */}\r\n                {currentUser && currentUser.role === 'patient' && currentUser.email ? (\r\n                  <div>\r\n                    <p>Booking as: {currentUser.name} ({currentUser.email})</p>\r\n                    <button className=\"book-button\" onClick={() => bookAppointment(selectedDoctor, { name: currentUser.name, email: currentUser.email, registered: true, id: currentUser.id })}>\r\n                      Confirm Booking\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <div>\r\n                    <div className=\"form-group\">\r\n                      <label>Name</label>\r\n                      <input className=\"form-control\" value={guestName} onChange={e => setGuestName(e.target.value)} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                      <label>Email</label>\r\n                      <input className=\"form-control\" value={guestEmail} onChange={e => setGuestEmail(e.target.value)} />\r\n                    </div>\r\n                    <button className=\"book-button\" onClick={() => bookAppointment(selectedDoctor, { name: guestName, email: guestEmail, registered: false })}>\r\n                      Confirm Guest Booking\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </section>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PatientDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}